#1 Есть скрипт:

a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
Какие значения переменным c,d,e будут присвоены? Почему?

=>

qwerty@ubuntu:~/devops-2$ a=1
qwerty@ubuntu:~/devops-2$ b=2
qwerty@ubuntu:~/devops-2$ c=a+b
qwerty@ubuntu:~/devops-2$ d=$a+$b
qwerty@ubuntu:~/devops-2$ e=$(($a+$b))
qwerty@ubuntu:~/devops-2$ echo $c
a+b
qwerty@ubuntu:~/devops-2$ echo $d
1+2
qwerty@ubuntu:~/devops-2$ echo $e
3

#Ответ

Переменна    Значение	Обоснование
a		a+b	Переменная с будет равна a+b поскольку она умолчанию определена как строковая переменная
b		1+2	Переменная d будет равна 1+2 поскольку a и b это простые числовые значения, а bash выводит выражение как последовательность переменных и знак +здесь выводится как текст.
c		3	Переменная e будет равна 3 поскольку выражение заключено в двойные скобки и bash уже может посчитать формулу

#2 На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
#Ответ

while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done

В первой строке не хватало скобки. Добавил надпись об доступности сайта, будет выводится или нет в зависимости от доступности. > Лог файл быдет не дописываться, а заменяться. Тем самым же используя лишние рессурсы на бесконечный лог файл.

#!/bin/bash
while ((1==1))
do
        curl http://ya.ru
        if (($? != 0))
        then
                date > curl.log
        else
                echo site is available!
        fi
done

#3 Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.
#Ответ

#!/usr/bin/bash

 for i in 192.168.0.1 173.194.222.113 87.250.250.242;  # присваиваем перемнной i наши IP адреса

 do                                                    # выполни
 count=5                                           # присваиваем перемнной count пятерку, далее это кол-во нашего вывода
 while (($count > 0))                                  # выполняй по $count > 0
 do                                                    # выполни
 nc -zvw2 $i 80 >> /home/qwerty/devops-2/portscan.log 2>&1 # используй команду nc -z – отключить отправку данных. Используется при сканировании портов; -v – подробный режим. И>

 let "count -=1"                                  # переведи слово в число и уменьшай значение на единицу

 done    
 done                                                  # конец цикла



#4 Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается
#Ответ

#!/bin/bash
ips=(192.168.0.1 173.194.222.113 87.250.250.24)
timeout=5
log=ip_log.log
errorlog=ip_error.log
check='curl -Is --connect-timeout'
for i in {1..5}; do
	date >>$log
	for host in ${ips[@]}; do
		$check $timeout http://$host >/dev/null

		if (($? == 0)); then
			status="http UP"
			echo $host $status >>$log
		else
			status="http DOWN"
			echo $host $status >>$errorlog
			exit
		fi

	done
done

#5 Мы хотим, чтобы у нас были красивые сообщения для коммитов в репозиторий. Для этого нужно написать локальный хук для git, который будет проверять, что сообщение в коммите содержит код текущего задания в квадратных скобках и количество символов в сообщении не превышает 30. Пример сообщения: [04-script-01-bash] сломал хук.
#Ответ

#!/bin/bash
test "" = "$(grep '^Signed-off-by: ' "$1" |
         sort | uniq -c | sed -e '/^[   ]*1[    ]/d')" || {
        echo >&2 Duplicate Signed-off-by lines.
        exit 1
}

commit='^(DevSys-[0-9])'
if ! grep -qE "$commit" "$1"; then
    echo "Commit message [DevSys-00-test]"
    exit 1
fi
